{
  "prereqs": [
    "Node.js 16+ (recommended Node.js 20 for CI and .replit) [README.md:26, .github/workflows/ci.yml:20, .replit:1]",
    "npm (or yarn) [README.md:27, .github/workflows/ci.yml:21]",
    "Optional: PostgreSQL 16+ if running database migrations [drizzle.config.ts:10, .replit:1]",
    "Recommended: Modern web browser (for UI)",
    "Recommended: git (for clone) [README.md:31]"
  ],
  "install_steps": [
    {
      "step": "Clone the repository",
      "command": "git clone https://github.com/Swixixle/Lantern.git",
      "evidence": {
        "path": "README.md",
        "line_start": 31,
        "line_end": 31,
        "snippet_hash": "00c61c5cacb3",
        "display": "README.md:31"
      }
    },
    {
      "step": "Move into the project root directory",
      "command": "cd Lantern",
      "evidence": {
        "path": "README.md",
        "line_start": 32,
        "line_end": 32,
        "snippet_hash": "499a1a83dfb9",
        "display": "README.md:32"
      }
    },
    {
      "step": "Install dependencies",
      "command": "npm install",
      "evidence": {
        "path": "README.md",
        "line_start": 33,
        "line_end": 33,
        "snippet_hash": "3a2dc0ae21eb",
        "display": "README.md:33"
      }
    }
  ],
  "config": [
    {
      "name": "PORT (env variable)",
      "purpose": "Specifies the port for the dev server; default is 5000.",
      "evidence": {
        "path": ".replit",
        "line_start": 18,
        "line_end": 18,
        "snippet_hash": "2cb616fc39c1",
        "display": ".replit:18"
      }
    },
    {
      "name": "DATABASE_URL (env variable)",
      "purpose": "Specifies the database connection string for Drizzle ORM. Required for migration commands (`drizzle-kit`).",
      "evidence": {
        "path": "drizzle.config.ts",
        "line_start": 3,
        "line_end": 3,
        "snippet_hash": "a19790628fbe",
        "display": "drizzle.config.ts:3"
      }
    }
  ],
  "run_dev": [
    {
      "step": "Run the full dev stack (client + server, hot-reload)",
      "command": "npm run dev",
      "evidence": {
        "path": "README.md",
        "line_start": 40,
        "line_end": 40,
        "snippet_hash": "21f1677c8f4f",
        "display": "README.md:40"
      }
    },
    {
      "step": "Run only the client (Vite dev server) on port 5000",
      "command": "npm run dev:client",
      "evidence": {
        "path": "AUDIT_REPORT.md",
        "line_start": 30,
        "line_end": 30,
        "snippet_hash": "41222fc1af2f",
        "display": "AUDIT_REPORT.md:30"
      }
    }
  ],
  "run_prod": [
    {
      "step": "Build the application",
      "command": "npm run build",
      "evidence": {
        "path": "README.md",
        "line_start": 57,
        "line_end": 57,
        "snippet_hash": "16c0e4305ac2",
        "display": "README.md:57"
      }
    },
    {
      "step": "Start the production server (serves built assets and static API)",
      "command": "npm start",
      "evidence": {
        "path": "README.md",
        "line_start": 58,
        "line_end": 58,
        "snippet_hash": "06bf4af99102",
        "display": "README.md:58"
      }
    }
  ],
  "usage_examples": [
    {
      "description": "Start the application for development",
      "command": "npm run dev"
    },
    {
      "description": "Open the app in your browser",
      "command": "Visit http://localhost:5000"
    },
    {
      "description": "Run tests (type check)",
      "command": "npm run check",
      "evidence": "package.json:11, .github/workflows/ci.yml:27"
    },
    {
      "description": "Build for production",
      "command": "npm run build"
    },
    {
      "description": "Start the production server (must run `build` first)",
      "command": "npm start"
    }
  ],
  "verification_steps": [
    {
      "step": "Run the TypeScript type check (should pass with no errors)",
      "command": "npm run check",
      "evidence": {
        "path": "package.json",
        "line_start": 11,
        "line_end": 11,
        "snippet_hash": "0dd0428ef4df",
        "display": "package.json:11"
      }
    },
    {
      "step": "Build the project (ensures compilation passes)",
      "command": "npm run build",
      "evidence": {
        "path": "BOOK_OF_FIXES.md",
        "line_start": 32,
        "line_end": 32,
        "snippet_hash": "88973215e7d5",
        "display": "BOOK_OF_FIXES.md:32"
      }
    },
    {
      "step": "Run all regression and unit tests (if available)",
      "command": "npx vitest run client/src/lib/tests/unit/",
      "evidence": {
        "path": "M2_SUMMARY.md",
        "line_start": 62,
        "line_end": 62,
        "snippet_hash": "b95c3e9f333d",
        "display": "M2_SUMMARY.md:62"
      }
    },
    {
      "step": "Verify app boots at http://localhost:5000",
      "command": "Open in browser and visually confirm Library page loads",
      "evidence": {
        "path": "AUDIT_REPORT.md",
        "line_start": 30,
        "line_end": 30,
        "snippet_hash": "41222fc1af2f",
        "display": "AUDIT_REPORT.md:30"
      }
    }
  ],
  "common_failures": [
    {
      "symptom": "White Screen / App won't load",
      "cause": "React parser error or build step failed (e.g., syntax error, missing closing tag)",
      "fix": "Check console for errors; fix code errors; run `npm run build` until passing. Visit /__boot dev route to confirm server health.",
      "evidence": {
        "path": "README.md",
        "line_start": 82,
        "line_end": 87,
        "snippet_hash": "0e36bc3f0879",
        "display": "README.md:82-87"
      }
    },
    {
      "symptom": "EADDRINUSE/Error: Port already in use",
      "cause": "Another process is occupying port 5000.",
      "fix": "Stop all running workflows, wait 5 seconds, restart the workflow.",
      "evidence": {
        "path": "README.md",
        "line_start": 88,
        "line_end": 97,
        "snippet_hash": "e04665dec594",
        "display": "README.md:88-97"
      }
    },
    {
      "symptom": "Data unexpectedly lost (library is empty after refresh)",
      "cause": "Browser localStorage is volatile\u2014data lost if cache is cleared.",
      "fix": "Export packs regularly as JSON. Data cannot be recovered after browser cache clear.",
      "evidence": {
        "path": "AUDIT_REPORT.md",
        "line_start": 56,
        "line_end": 57,
        "snippet_hash": "065a6a01dd6f",
        "display": "AUDIT_REPORT.md:56-57"
      }
    },
    {
      "symptom": "Verification/test suite fails with migration/validation errors",
      "cause": "Type guard or migration logic broken, or change in pack schema.",
      "fix": "Ensure all type guards and migration logic are up to date; re-run `npm run build` after code changes.",
      "evidence": {
        "path": "BOOK_OF_FIXES.md",
        "line_start": 47,
        "line_end": 97,
        "snippet_hash": "3129632804d4",
        "display": "BOOK_OF_FIXES.md:47-97"
      }
    }
  ],
  "unknowns": [
    {
      "what_is_missing": "Exact details of the /api backend endpoints and their environment/config requirements (e.g., environment variables)",
      "why_it_matters": "The server code exists but is 'API placeholder' only; in production, actual endpoint/environment wiring may be required.",
      "what_evidence_needed": "Full content of server/index.ts, server/routes.ts, and related config/example .env"
    },
    {
      "what_is_missing": "Automated end-to-end test/smoke test command for final user flows",
      "why_it_matters": "Ensures real user workflows and curation correctly work after changes/upgrades.",
      "what_evidence_needed": "E2E/playwright/cypress tests and test commands/scripts"
    },
    {
      "what_is_missing": "Explicit environment configuration required for HALO-RECEIPTS or any cryptographic adapter integration",
      "why_it_matters": "Production usage and test of crypto integration may require additional secrets/env/config not described",
      "what_evidence_needed": "Example .env setup for production crypto adapter; actual config documentation"
    }
  ],
  "missing_evidence_requests": [
    "No evidence for full API server endpoint wiring, especially /api/report, /api/reports, /api/report/generate, or /api/config.",
    "No E2E or user-facing automated test command provided (manual test flow evidence only).",
    "No example of production or crypto adapter (HALO-RECEIPTS) environment config or required secrets.",
    "No explicit user authentication/session/authorization config for `/api` routes (may exist, but not evidenced)."
  ],
  "completeness": {
    "score": 76,
    "max": 100,
    "missing": [
      "port_behavior: no port evidence with verified snippet_hash"
    ],
    "deductions": [
      "-9 for 3 unknown(s)"
    ],
    "notes": "-9 for 3 unknown(s); No Dockerfile found; 3 unknown(s) reported"
  }
}