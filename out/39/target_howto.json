{
  "prereqs": [
    "Node.js 20+ (for server and frontend, required for all scripts) (README.md:37, replit.md:41, .replit:1)",
    "npm (Node.js package manager) (README.md:25, .replit:2)",
    "Python 3.11+ (for analyzer CLI, pipeline, and ops scripts) (README.md:37, .replit:1)",
    "PostgreSQL 14+ running and accessible (README.md:37\u201338, .replit:1, drizzle.config.ts:10)",
    "jq, unzip, (for export/ops scripts, Replit or ops shell) (docs/dossiers/lantern_program_totality_dossier.md:81, .replit:7)",
    "TypeScript, tsx, drizzle-kit (dev dependencies for build/scripts; package.json:7\u201312,99\u2013104)"
  ],
  "install_steps": [
    {
      "step": "Clone the repository",
      "command": "git clone <repo-url>",
      "evidence": {
        "path": "docs/dossiers/lantern_program_totality_dossier.md",
        "line_start": 86,
        "line_end": 86,
        "snippet_hash": "af4db2203afc",
        "display": "docs/dossiers/lantern_program_totality_dossier.md:86"
      }
    },
    {
      "step": "Install Node dependencies",
      "command": "npm install",
      "evidence": {
        "path": "README.md",
        "line_start": 29,
        "line_end": 29,
        "snippet_hash": "e3b0c44298fc",
        "display": "README.md:29"
      }
    },
    {
      "step": "Install Python package and CLI entrypoint",
      "command": "pip install -e .",
      "evidence": {
        "path": "README.md",
        "line_start": 25,
        "line_end": 25,
        "snippet_hash": "92755120ac2c",
        "display": "README.md:25"
      }
    },
    {
      "step": "Copy example env config",
      "command": "cp .env.example .env",
      "evidence": {
        "path": "docs/dossiers/lantern_program_totality_dossier.md",
        "line_start": 89,
        "line_end": 89,
        "snippet_hash": "232f2a0c483a",
        "display": "docs/dossiers/lantern_program_totality_dossier.md:89"
      }
    },
    {
      "step": "Edit `.env` for secrets and configuration",
      "command": "edit .env",
      "evidence": {
        "path": "docs/dossiers/lantern_program_totality_dossier.md",
        "line_start": 91,
        "line_end": 91,
        "snippet_hash": "ecd94c8e718d",
        "display": "docs/dossiers/lantern_program_totality_dossier.md:91"
      }
    },
    {
      "step": "Initialize the database (apply schema)",
      "command": "npm run db:push",
      "evidence": {
        "path": "README.md",
        "line_start": 39,
        "line_end": 39,
        "snippet_hash": "e3b0c44298fc",
        "display": "README.md:39"
      }
    }
  ],
  "config": [
    {
      "name": "DATABASE_URL",
      "purpose": "Connection string for PostgreSQL. Required for DB connectivity.",
      "evidence": {
        "path": "drizzle.config.ts",
        "line_start": 3,
        "line_end": 3,
        "snippet_hash": "a19790628fbe",
        "display": "drizzle.config.ts:3"
      }
    },
    {
      "name": "API_KEY",
      "purpose": "Required for authenticating to private API endpoints.",
      "evidence": ".env.example:10"
    },
    {
      "name": "SESSION_SECRET",
      "purpose": "Session secret for express-session; must be a strong/random value.",
      "evidence": ".env.example:23"
    },
    {
      "name": "NODE_ENV",
      "purpose": "Sets environment mode (development/production).",
      "evidence": ".env.example:13"
    },
    {
      "name": "PORT",
      "purpose": "Defines server port (defaults to 5000).",
      "evidence": ".env.example:14"
    },
    {
      "name": "AI_INTEGRATIONS_OPENAI_API_KEY",
      "purpose": "OpenAI API key for LLM-based analysis mode.",
      "evidence": {
        "path": "README.md",
        "line_start": 85,
        "line_end": 85,
        "snippet_hash": "7fb69856946c",
        "display": "README.md:85"
      }
    },
    {
      "name": "AI_INTEGRATIONS_OPENAI_BASE_URL",
      "purpose": "Base URL for OpenAI API for LLM-based analysis.",
      "evidence": {
        "path": "README.md",
        "line_start": 86,
        "line_end": 86,
        "snippet_hash": "e3b0c44298fc",
        "display": "README.md:86"
      }
    },
    {
      "name": "Other optional: TRANSCRIPT_MODE, CHECKPOINT_INTERVAL, CHECKPOINT_ANCHOR_TYPE, etc.",
      "purpose": "Advanced/tunable behaviors (see .env.example; forensic/Audit/anchoring settings).",
      "evidence": {
        "path": "docs/dossiers/lantern_program_totality_dossier.md",
        "line_start": 104,
        "line_end": 104,
        "snippet_hash": "887abc9f5ccb",
        "display": "docs/dossiers/lantern_program_totality_dossier.md:104"
      }
    }
  ],
  "run_dev": [
    {
      "step": "Start development server (Node/Express and React client with HMR)",
      "command": "npm run dev",
      "evidence": {
        "path": "package.json",
        "line_start": 7,
        "line_end": 7,
        "snippet_hash": "fd240a9dc053",
        "display": "package.json:7"
      }
    },
    {
      "step": "Access the dev server",
      "command": "http://localhost:5000",
      "evidence": {
        "path": "README.md",
        "line_start": 47,
        "line_end": 47,
        "snippet_hash": "f1b901847390",
        "display": "README.md:47"
      }
    }
  ],
  "run_prod": [
    {
      "step": "Build all assets",
      "command": "npm run build",
      "evidence": {
        "path": "package.json",
        "line_start": 8,
        "line_end": 8,
        "snippet_hash": "79d8bdf275d6",
        "display": "package.json:8"
      }
    },
    {
      "step": "Start production server (Node/Express, compiled frontend served statically)",
      "command": "npm run start",
      "evidence": {
        "path": "package.json",
        "line_start": 9,
        "line_end": 9,
        "snippet_hash": "020435ddf436",
        "display": "package.json:9"
      }
    },
    {
      "step": "Serve on configured port (default: 5000 from .env or environment)",
      "command": "node ./dist/index.cjs (internally via npm run start or .replit deployment)",
      "evidence": {
        "path": ".replit",
        "line_start": 18,
        "line_end": 18,
        "snippet_hash": "4530c109285c",
        "display": ".replit:18"
      }
    }
  ],
  "usage_examples": [
    {
      "description": "Analyze a GitHub repository for evidence-bound dossier",
      "command": "pta analyze https://github.com/user/repo -o ./output",
      "evidence": "README.md:46"
    },
    {
      "description": "Analyze a local folder for dossier generation",
      "command": "pta analyze ./path/to/project -o ./output",
      "evidence": "README.md:51"
    },
    {
      "description": "Analyze the current project (Replit mode, deterministic only)",
      "command": "pta analyze --replit --no-llm -o ./output",
      "evidence": "README.md:56,64"
    },
    {
      "description": "Run the analyzer CLI directly (as module)",
      "command": "python -m server.analyzer.src --help",
      "evidence": "README.md:31"
    },
    {
      "description": "Run the analyzer CLI directly (as file)",
      "command": "python server/analyzer/analyzer_cli.py --help",
      "evidence": "README.md:32"
    },
    {
      "description": "Check system health endpoint",
      "command": "curl http://localhost:5000/api/health",
      "evidence": "docs/dossiers/lantern_program_totality_dossier.md:128"
    },
    {
      "description": "Verify audit log chain with API_KEY",
      "command": "curl -H \"x-api-key: <API_KEY>\" http://localhost:5000/api/audit/verify",
      "evidence": "docs/dossiers/lantern_program_totality_dossier.md:140"
    }
  ],
  "verification_steps": [
    {
      "step": "Can be installed and all 3 command entrypoints respond",
      "command": "pta --help; python -m server.analyzer.src --help; python server/analyzer/analyzer_cli.py --help",
      "evidence": {
        "path": "attached_assets/Pasted-Got-it-Copilot-said-it-did-it-but-you-need-reproducible_1771067676312.txt",
        "line_start": 246,
        "line_end": 250,
        "snippet_hash": "03b0895d239a",
        "display": "attached_assets/Pasted-Got-it-Copilot-said-it-did-it-but-you-need-reproducible_1771067676312.txt:246-250"
      }
    },
    {
      "step": "Run deterministic analysis and confirm output files are created",
      "command": "pta analyze --replit -o <outdir> --no-llm\nls <outdir>/target_howto.json <outdir>/coverage.json",
      "evidence": {
        "path": "attached_assets/Pasted-Got-it-Copilot-said-it-did-it-but-you-need-reproducible_1771067676312.txt",
        "line_start": 251,
        "line_end": 251,
        "snippet_hash": "46effdb3adbb",
        "display": "attached_assets/Pasted-Got-it-Copilot-said-it-did-it-but-you-need-reproducible_1771067676312.txt:251"
      }
    },
    {
      "step": "Database schema push succeeds (applies schema)",
      "command": "npm run db:push",
      "evidence": {
        "path": "README.md",
        "line_start": 39,
        "line_end": 39,
        "snippet_hash": "e3b0c44298fc",
        "display": "README.md:39"
      }
    }
  ],
  "common_failures": [
    {
      "symptom": "No module named 'core'",
      "cause": "Old import patterns break when importing analyzer as a package.",
      "fix": "Ensure .py files use relative imports, or install with `pip install -e .` as per README and packaging doc.",
      "evidence": {
        "path": "README.md",
        "line_start": 194,
        "line_end": 194,
        "snippet_hash": "e3b0c44298fc",
        "display": "README.md:194"
      }
    },
    {
      "symptom": "Missing DATABASE_URL",
      "cause": "Environment variable not set (or .env not configured).",
      "fix": "Set DATABASE_URL in .env with a valid PostgreSQL connection string.",
      "evidence": {
        "path": "drizzle.config.ts",
        "line_start": 3,
        "line_end": 3,
        "snippet_hash": "a19790628fbe",
        "display": "drizzle.config.ts:3"
      }
    },
    {
      "symptom": "401 Unauthorized",
      "cause": "API_KEY not set or provided on requests to private endpoints.",
      "fix": "Set correct x-api-key header, check .env.",
      "evidence": {
        "path": "docs/dossiers/lantern_program_totality_dossier.md",
        "line_start": 151,
        "line_end": 151,
        "snippet_hash": "ab249b766ec2",
        "display": "docs/dossiers/lantern_program_totality_dossier.md:151"
      }
    },
    {
      "symptom": "Server not running on expected port",
      "cause": "App not started, or port already in use.",
      "fix": "Check logs, ensure PORT=5000 (or configured), check for port conflicts.",
      "evidence": {
        "path": "docs/dossiers/lantern_program_totality_dossier.md",
        "line_start": 153,
        "line_end": 153,
        "snippet_hash": "6bfea429a287",
        "display": "docs/dossiers/lantern_program_totality_dossier.md:153"
      }
    },
    {
      "symptom": "Forensic pack tamper undetected",
      "cause": "Bug or script not installed.",
      "fix": "Re-export, ensure the appropriate forensic script is in place.",
      "evidence": {
        "path": "docs/dossiers/lantern_program_totality_dossier.md",
        "line_start": 154,
        "line_end": 154,
        "snippet_hash": "bce1008b2a9d",
        "display": "docs/dossiers/lantern_program_totality_dossier.md:154"
      }
    }
  ],
  "unknowns": [
    {
      "what_is_missing": "Production deployment details outside Replit (Dockerfile/etc).",
      "why_it_matters": "Needed for real-world or non-Replit ops.",
      "what_evidence_needed": "systemd, Dockerfile, PM2, or reverse proxy config."
    },
    {
      "what_is_missing": "Explicit logging path or view commands.",
      "why_it_matters": "Crucial for ops/troubleshooting.",
      "what_evidence_needed": "Log file locations/sample 'tail' commands or explicit log configuration."
    },
    {
      "what_is_missing": "Webhook or outbound events integration configs.",
      "why_it_matters": "For SIEM/alerting and integration surface.",
      "what_evidence_needed": "Outbound webhook configuration or documentation in source."
    },
    {
      "what_is_missing": "Standalone frontend hosting/serving (split hosting) docs.",
      "why_it_matters": "Key for deployments splitting backend/frontend.",
      "what_evidence_needed": "Build/start/serve commands for frontend only."
    },
    {
      "what_is_missing": "Step-by-step API_KEY or SESSION_SECRET rotation guides.",
      "why_it_matters": "For ops, secops, and long-term maintenance.",
      "what_evidence_needed": "Explicit guides or scripts for credential rotation."
    }
  ],
  "missing_evidence_requests": [
    "No Dockerfile, systemd, or production process manager config found for real-world deployment outside Replit.",
    "No log file path or viewing/tail command documented.",
    "No outbound webhook configuration or evidence of events/push integrations.",
    "No dedicated front-end build/serve/deploy instructions for stand-alone operation.",
    "No evidence for secret/key rotation workflow or documentation."
  ],
  "completeness": {
    "score": 70,
    "max": 100,
    "missing": [
      "port_behavior: no port evidence with verified snippet_hash"
    ],
    "deductions": [
      "-15 for 5 unknown(s)"
    ],
    "notes": "-15 for 5 unknown(s); 5 unknown(s) reported"
  }
}