{
  "prereqs": [
    "Node.js >=20 (for Express/React app) [.replit:1, Dockerfile:1]",
    "Python >=3.11 (for analyzer CLI) [.replit:1, pyproject.toml:5]",
    "PostgreSQL (16+) [.replit:1, replit.md:78]",
    "npm (Node package manager) [Dockerfile:6, package.json:1]",
    "pip (Python package manager) [pyproject.toml:6]",
    "Drizzle ORM/Kit for database migrations [package.json:49, package.json:99]",
    "Vite (for frontend build) [package.json:105]",
    "esbuild (for backend build) [package.json:100]",
    "tsx for TypeScript execution [package.json:103]",
    "Tailwind CSS, PostCSS, Autoprefixer (for CSS) [package.json:102, postcss.config.js:3, tailwind.config.ts:107]"
  ],
  "install_steps": [
    {
      "step": "Install Node.js dependencies for client/server (monorepo).",
      "command": "npm ci --ignore-scripts",
      "evidence": {
        "path": "Dockerfile",
        "line_start": 6,
        "line_end": 6,
        "snippet_hash": "a0b0f10ae96d",
        "display": "Dockerfile:6"
      }
    },
    {
      "step": "Install Python analyzer (editable) for 'pta' CLI and module invocation.",
      "command": "pip install -e .",
      "evidence": {
        "path": "README.md",
        "line_start": 85,
        "line_end": 85,
        "snippet_hash": "92755120ac2c",
        "display": "README.md:85"
      }
    },
    {
      "step": "Build TypeScript (server, client) and Python artifacts as needed.",
      "command": "npm run build",
      "evidence": {
        "path": "package.json",
        "line_start": 8,
        "line_end": 8,
        "snippet_hash": "79d8bdf275d6",
        "display": "package.json:8"
      }
    }
  ],
  "config": [
    {
      "name": "DATABASE_URL",
      "purpose": "PostgreSQL database connection string required by both backend and Drizzle ORM/Kit.",
      "evidence": {
        "path": "drizzle.config.ts",
        "line_start": 3,
        "line_end": 3,
        "snippet_hash": "a19790628fbe",
        "display": "drizzle.config.ts:3"
      }
    },
    {
      "name": "GITHUB_WEBHOOK_SECRET",
      "purpose": "Used to verify incoming GitHub webhook signatures (HMAC-SHA256); required for CI integration.",
      "evidence": {
        "path": "replit.md",
        "line_start": 133,
        "line_end": 133,
        "snippet_hash": "5223ac65dd80",
        "display": "replit.md:133"
      }
    },
    {
      "name": "GITHUB_TOKEN",
      "purpose": "Used for git clone authentication when fetching private repos for live CI runs.",
      "evidence": {
        "path": "replit.md",
        "line_start": 134,
        "line_end": 134,
        "snippet_hash": "db6c47b647f6",
        "display": "replit.md:134"
      }
    },
    {
      "name": "CI_TMP_DIR",
      "purpose": "Directory used for temporary repo clones in CI runs. Default: /tmp/ci.",
      "evidence": {
        "path": "replit.md",
        "line_start": 135,
        "line_end": 135,
        "snippet_hash": "747ede09eab6",
        "display": "replit.md:135"
      }
    },
    {
      "name": "ANALYZER_TIMEOUT_MS",
      "purpose": "Number of ms before analyzer is killed during CI job (default: 600000 ms = 10m).",
      "evidence": {
        "path": "replit.md",
        "line_start": 136,
        "line_end": 136,
        "snippet_hash": "7131d8b2d92e",
        "display": "replit.md:136"
      }
    },
    {
      "name": "ADMIN_KEY",
      "purpose": "Admin routes authentication (internal use).",
      "evidence": {
        "path": "server/routes.ts",
        "line_start": 36,
        "line_end": 36,
        "snippet_hash": "e2bf4a7a579d",
        "display": "server/routes.ts:36"
      }
    },
    {
      "name": "AI_INTEGRATIONS_OPENAI_API_KEY",
      "purpose": "OpenAI API key for LLM-powered code analysis, chat, audio, and image integrations.",
      "evidence": {
        "path": "replit.md",
        "line_start": 216,
        "line_end": 216,
        "snippet_hash": "9a7243284b61",
        "display": "replit.md:216"
      }
    },
    {
      "name": "AI_INTEGRATIONS_OPENAI_BASE_URL",
      "purpose": "Base URL for the OpenAI API endpoints.",
      "evidence": {
        "path": "replit.md",
        "line_start": 217,
        "line_end": 217,
        "snippet_hash": "74446865b626",
        "display": "replit.md:217"
      }
    }
  ],
  "run_dev": [
    {
      "step": "Start Express backend (and dev Vite middleware) in dev mode.",
      "command": "npm run dev",
      "evidence": {
        "path": "package.json",
        "line_start": 7,
        "line_end": 7,
        "snippet_hash": "fd240a9dc053",
        "display": "package.json:7"
      }
    },
    {
      "step": "Run React frontend (served via dev server, Vite middleware handled).",
      "command": "npm run dev",
      "evidence": {
        "path": ".replit",
        "line_start": 2,
        "line_end": 2,
        "snippet_hash": "96fa2e5505e4",
        "display": ".replit:2"
      }
    },
    {
      "step": "Run analyzer CLI in deterministic replit mode.",
      "command": "pta analyze --replit --no-llm -o ./output",
      "evidence": {
        "path": "README.md",
        "line_start": 116,
        "line_end": 116,
        "snippet_hash": "4bc5d8e7df37",
        "display": "README.md:116"
      }
    }
  ],
  "run_prod": [
    {
      "step": "Build client/server, then start Node backend with production entrypoint.",
      "command": "npm run build && npm start",
      "evidence": {
        "path": "package.json",
        "line_start": 8,
        "line_end": 8,
        "snippet_hash": "79d8bdf275d6",
        "display": "package.json:8"
      }
    },
    {
      "step": "For pure Python analyzer use: run analyzer CLI in deterministic/semantic mode.",
      "command": "pta analyze [args...]",
      "evidence": {
        "path": "README.md",
        "line_start": 106,
        "line_end": 106,
        "snippet_hash": "c16ef5be236e",
        "display": "README.md:106"
      }
    }
  ],
  "usage_examples": [
    {
      "description": "Analyze a GitHub repository & output results.",
      "command": "pta analyze https://github.com/user/repo -o ./output"
    },
    {
      "description": "Analyze a local project folder.",
      "command": "pta analyze ./path/to/project -o ./output"
    },
    {
      "description": "Analyze the current Replit workspace in deterministic (no-LLM) mode.",
      "command": "pta analyze --replit --no-llm -o ./output"
    },
    {
      "description": "Analyze (with LLM integration).",
      "command": "pta analyze --replit -o ./output"
    }
  ],
  "verification_steps": [
    {
      "step": "Run smoke test script to validate CLI entrypoints and output artifacts.",
      "command": "bash scripts/smoke_test.sh",
      "evidence": {
        "path": "attached_assets/Pasted-Got-it-Copilot-said-it-did-it-but-you-need-reproducible_1771067676312.txt",
        "line_start": 191,
        "line_end": 191,
        "snippet_hash": "e3b0c44298fc",
        "display": "attached_assets/Pasted-Got-it-Copilot-said-it-did-it-but-you-need-reproducible_1771067676312.txt:191"
      }
    },
    {
      "step": "Verify API health endpoint for CI system.",
      "command": "curl https://<your-app-domain>/api/ci/health",
      "evidence": {
        "path": "replit.md",
        "line_start": 176,
        "line_end": 176,
        "snippet_hash": "1de47e8c3ce2",
        "display": "replit.md:176"
      }
    }
  ],
  "common_failures": [
    {
      "symptom": "ModuleNotFoundError: core",
      "cause": "Incorrect Python package/module import strategy.",
      "fix": "Use package-relative imports and follow packaging rules as in ops doc.",
      "evidence": {
        "path": "README.md",
        "line_start": 276,
        "line_end": 276,
        "snippet_hash": "8494328c145f",
        "display": "README.md:276"
      }
    },
    {
      "symptom": "401 on webhook delivery (GitHub -> PTA CI endpoint)",
      "cause": "GITHUB_WEBHOOK_SECRET mismatch or not set.",
      "fix": "Verify secrets match exactly in Replit secrets and GitHub webhook config.",
      "evidence": {
        "path": "replit.md",
        "line_start": 185,
        "line_end": 185,
        "snippet_hash": "2e10aa950730",
        "display": "replit.md:185"
      }
    },
    {
      "symptom": "Jobs stuck in DEAD in CI feed.",
      "cause": "Clone failure, invalid SHA, or analyzer crash. Often due to missing GITHUB_TOKEN for private repos.",
      "fix": "Check 'error' field on run and lastError on job.",
      "evidence": {
        "path": "replit.md",
        "line_start": 186,
        "line_end": 186,
        "snippet_hash": "8692dcb99d86",
        "display": "replit.md:186"
      }
    },
    {
      "symptom": "Run stays QUEUED in CI feed.",
      "cause": "Worker not running.",
      "fix": "Check for '[CI Worker] Starting background loop' in server logs. Restart server.",
      "evidence": {
        "path": "replit.md",
        "line_start": 188,
        "line_end": 188,
        "snippet_hash": "74071080c50d",
        "display": "replit.md:188"
      }
    },
    {
      "symptom": "Analyzer timeout (job killed after 10m).",
      "cause": "Repo too large or LLM call too slow.",
      "fix": "Increase ANALYZER_TIMEOUT_MS or use --no-llm mode.",
      "evidence": {
        "path": "replit.md",
        "line_start": 189,
        "line_end": 189,
        "snippet_hash": "e3f54c03d089",
        "display": "replit.md:189"
      }
    }
  ],
  "unknowns": [
    {
      "what_is_missing": "Precise default out-of-the-box database migration initialization sequence and migration artifact validation details.",
      "why_it_matters": "Operator may not know how or when to run initial DB migrations or check for schema drift.",
      "what_evidence_needed": "Explicit migration/init commands and procedural hooks in ops documentation with cited evidence."
    },
    {
      "what_is_missing": "Explicit description of all admin/privileged API endpoints and their authentication mechanism details.",
      "why_it_matters": "Incomplete documentation may expose risk for misunderstood operator roles.",
      "what_evidence_needed": "Full admin endpoint list with reference to code (server/routes.ts:line) and specific auth/perm model."
    }
  ],
  "missing_evidence_requests": [
    "How are database migrations initialized and invoked (beyond 'npm run db:push')?",
    "What privileged API endpoints exist and what authentication model do they use?",
    "Are there any systemd/service unit templates or deployment scripts (other than Dockerfile) for real-world deployment?",
    "Are health endpoints actually observed/testable in a running container (not just code presence)?",
    "Are there any production log shipping/storage/service integration methods in use beyond console log?"
  ],
  "replit_execution_profile": {
    "run_command": "npm run dev [.replit:2]",
    "language": "nodejs",
    "port_binding": {
      "port": null,
      "binds_all_interfaces": true,
      "uses_env_port": true,
      "evidence": [
        {
          "path": "server/index.ts",
          "line_start": 92,
          "line_end": 92,
          "snippet_hash": "75d345a78f84",
          "display": "server/index.ts:92"
        },
        {
          "path": "server/index.ts",
          "line_start": 96,
          "line_end": 96,
          "snippet_hash": "9b7206f3d09a",
          "display": "server/index.ts:96"
        }
      ]
    },
    "required_secrets": [
      {
        "name": "DATABASE_URL",
        "referenced_in": [
          {
            "path": "drizzle.config.ts",
            "line_start": 3,
            "line_end": 3,
            "snippet_hash": "a19790628fbe",
            "display": "drizzle.config.ts:3"
          },
          {
            "path": "drizzle.config.ts",
            "line_start": 12,
            "line_end": 12,
            "snippet_hash": "1005be19f14a",
            "display": "drizzle.config.ts:12"
          },
          {
            "path": "server/db.ts",
            "line_start": 7,
            "line_end": 7,
            "snippet_hash": "a19790628fbe",
            "display": "server/db.ts:7"
          },
          {
            "path": "server/db.ts",
            "line_start": 13,
            "line_end": 13,
            "snippet_hash": "111f33de9945",
            "display": "server/db.ts:13"
          }
        ]
      },
      {
        "name": "CI_TMP_DIR",
        "referenced_in": [
          {
            "path": "server/ci-worker.ts",
            "line_start": 68,
            "line_end": 68,
            "snippet_hash": "f0b3c470e005",
            "display": "server/ci-worker.ts:68"
          }
        ]
      },
      {
        "name": "GITHUB_TOKEN",
        "referenced_in": [
          {
            "path": "server/ci-worker.ts",
            "line_start": 73,
            "line_end": 73,
            "snippet_hash": "296214da00e6",
            "display": "server/ci-worker.ts:73"
          }
        ]
      },
      {
        "name": "ANALYZER_TIMEOUT_MS",
        "referenced_in": [
          {
            "path": "server/ci-worker.ts",
            "line_start": 126,
            "line_end": 126,
            "snippet_hash": "76e1b5bb0c59",
            "display": "server/ci-worker.ts:126"
          },
          {
            "path": "server/routes.ts",
            "line_start": 416,
            "line_end": 416,
            "snippet_hash": "76e1b5bb0c59",
            "display": "server/routes.ts:416"
          }
        ]
      },
      {
        "name": "ADMIN_KEY",
        "referenced_in": [
          {
            "path": "server/routes.ts",
            "line_start": 36,
            "line_end": 36,
            "snippet_hash": "e2bf4a7a579d",
            "display": "server/routes.ts:36"
          }
        ]
      },
      {
        "name": "GITHUB_WEBHOOK_SECRET",
        "referenced_in": [
          {
            "path": "server/routes.ts",
            "line_start": 198,
            "line_end": 198,
            "snippet_hash": "19a51aee36f0",
            "display": "server/routes.ts:198"
          }
        ]
      },
      {
        "name": "AI_INTEGRATIONS_OPENAI_API_KEY",
        "referenced_in": [
          {
            "path": "server/replit_integrations/audio/client.ts",
            "line_start": 10,
            "line_end": 10,
            "snippet_hash": "05da5f1b1281",
            "display": "server/replit_integrations/audio/client.ts:10"
          },
          {
            "path": "server/replit_integrations/chat/routes.ts",
            "line_start": 6,
            "line_end": 6,
            "snippet_hash": "05da5f1b1281",
            "display": "server/replit_integrations/chat/routes.ts:6"
          },
          {
            "path": "server/replit_integrations/image/client.ts",
            "line_start": 6,
            "line_end": 6,
            "snippet_hash": "05da5f1b1281",
            "display": "server/replit_integrations/image/client.ts:6"
          }
        ]
      },
      {
        "name": "AI_INTEGRATIONS_OPENAI_BASE_URL",
        "referenced_in": [
          {
            "path": "server/replit_integrations/audio/client.ts",
            "line_start": 11,
            "line_end": 11,
            "snippet_hash": "1f70e6a77d42",
            "display": "server/replit_integrations/audio/client.ts:11"
          },
          {
            "path": "server/replit_integrations/chat/routes.ts",
            "line_start": 7,
            "line_end": 7,
            "snippet_hash": "1f70e6a77d42",
            "display": "server/replit_integrations/chat/routes.ts:7"
          },
          {
            "path": "server/replit_integrations/image/client.ts",
            "line_start": 7,
            "line_end": 7,
            "snippet_hash": "1f70e6a77d42",
            "display": "server/replit_integrations/image/client.ts:7"
          }
        ]
      }
    ],
    "external_apis": [
      {
        "api": "OpenAI",
        "evidence_files": [
          "server/replit_integrations/audio/client.ts:1",
          "server/replit_integrations/audio/routes.ts:3",
          "server/replit_integrations/chat/routes.ts:2",
          "server/replit_integrations/image/routes.ts:2",
          "server/replit_integrations/image/client.ts:2"
        ]
      }
    ],
    "deployment_assumptions": [
      "Binds to 0.0.0.0 (all interfaces)",
      "Requires 8 secret(s): DATABASE_URL, CI_TMP_DIR, GITHUB_TOKEN, ANALYZER_TIMEOUT_MS, ADMIN_KEY, GITHUB_WEBHOOK_SECRET, AI_INTEGRATIONS_OPENAI_API_KEY, AI_INTEGRATIONS_OPENAI_BASE_URL"
    ],
    "observability": {
      "logging": true,
      "health_endpoint": true,
      "evidence": [
        {
          "path": "script/build.ts",
          "line_start": 38,
          "line_end": 38,
          "snippet_hash": "2f74cc3fdab1",
          "display": "script/build.ts:38"
        },
        {
          "path": "server/routes.ts",
          "line_start": 57,
          "line_end": 57,
          "snippet_hash": "f7ba68760271",
          "display": "server/routes.ts:57"
        },
        {
          "path": "server/routes.ts",
          "line_start": 326,
          "line_end": 326,
          "snippet_hash": "60178f45a644",
          "display": "server/routes.ts:326"
        },
        {
          "path": "shared/schema.ts",
          "line_start": 11,
          "line_end": 11,
          "snippet_hash": "7b53ae2c29e4",
          "display": "shared/schema.ts:11"
        },
        {
          "path": "shared/schema.ts",
          "line_start": 34,
          "line_end": 34,
          "snippet_hash": "9527a1834693",
          "display": "shared/schema.ts:34"
        },
        {
          "path": "shared/schema.ts",
          "line_start": 50,
          "line_end": 50,
          "snippet_hash": "12c51304bef0",
          "display": "shared/schema.ts:50"
        },
        {
          "path": "client/src/pages/ci-feed.tsx",
          "line_start": 114,
          "line_end": 114,
          "snippet_hash": "48449bf5687e",
          "display": "client/src/pages/ci-feed.tsx:114"
        }
      ]
    },
    "limitations": [
      "Cannot determine from static evidence if all backend logs are shipped or only console output.",
      "Cannot verify dynamic port sourcing at runtime in all setups.",
      "Cannot confirm real production service templates (systemd, k8s, etc.) exist.",
      "Cannot confirm health endpoint is available outside container from static analysis only."
    ]
  },
  "completeness": {
    "score": 94,
    "max": 100,
    "missing": [],
    "deductions": [
      "-6 for 2 unknown(s)"
    ],
    "notes": "-6 for 2 unknown(s); 2 unknown(s) reported"
  }
}