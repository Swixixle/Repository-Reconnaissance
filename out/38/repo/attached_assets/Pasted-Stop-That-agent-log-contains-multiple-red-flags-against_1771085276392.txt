Stop. That agent log contains multiple red flags against the directives you sent them, even if the end result “works.”

You should treat it as an untrusted self-report until verified by artifacts and invariants.

What’s wrong in the agent’s approach (per your requirements)
	1.	They built Phases 1–4 “in parallel.”
Your directive explicitly said: Phase Order (Do Not Reorder) and Do not begin Diff before EvidencePack is stable. Parallel work increases schema drift risk.
	2.	They wired things into Analyzer.run() and added constructor params.
You told them: Do not modify existing extractors.
Wiring is fine, but “constructor changes + run() integration” often bleeds into core logic. Needs inspection.
	3.	They introduced “verified snippet hashes AND matching file path patterns.”
This is likely okay if it’s a strict allowlist and anchored to deterministic evidence. But it can also become a quiet heuristic creep. Needs audit.
	4.	They claim “0 VERIFIED as expected since –no-llm mode doesn’t produce snippet_hash_verified evidence.”
That’s not necessarily “expected.” If your extractor already produces deterministic snippet hashes, VERIFIED should still exist without LLM. If they tied VERIFIED to an LLM toggle, that violates your DNA.

So: don’t accept the “all done” summary. Verify.

⸻

What you should demand from the Replit agent now

Send them this checklist as the required final gate. They must respond with evidence (file paths + snippets + command outputs), not prose.

A) Show the exact files added/changed

They must provide:
	•	git diff --stat
	•	git diff for:
	•	pta/unknowns.py
	•	pta/adapter.py
	•	pta/render.py (or whatever renderer module)
	•	pta_diff.py
	•	CLI entrypoint changes (Typer/Click/FastAPI wrapper)
	•	Any changes to Analyzer.run() / analyzer.py / main.py

B) Prove they didn’t mutate extraction logic

They must answer with citations to code:
	•	Where does the structural scan happen?
	•	Is it unchanged?
	•	Are new modules post-processing only?
	•	Confirm no new pattern matching inside extraction.

A simple rule: new logic must only read existing outputs (target_howto.json, claims.json, coverage.json) OR the in-memory equivalent after extraction.

C) EvidencePack contract lock

They must provide the produced evidence_pack.v1.json schema structure (keys) and confirm:
	•	evidence_pack_version: "1.0" exists
	•	unknowns (or known_unknowns) exists at top-level
	•	verified section exists and is populated independent of LLM
	•	inferred section cannot affect verified/unknowns

If they created both unknowns and known_unknowns, they must standardize to one and alias the other deterministically.

D) VERIFIED definition must be deterministic

Hard requirement:

A category is VERIFIED only if deterministic evidence exists: file reference + snippet hash (and if you have it, snippet hash verification).

If they tied VERIFIED to an LLM mode, they must fix it.

Ask them to demonstrate:
	•	Run with --no-llm:
	•	routes present under verified.routes
	•	dependencies present under verified.dependencies
	•	snippet hashes present (if you had them before)
	•	Unknown categories remain UNKNOWN unless proven.

E) Render modes must be pure views over EvidencePack

They must prove:
	•	pta render pack.json --mode auditor does not re-run extraction
	•	Auditor mode omits inferred narrative by default
	•	Executive mode shows DCI as visibility, not “security”

F) Diff must be deterministic and “non-judgmental”

They must prove pta diff only reports:
	•	add/remove/changed (routes/deps/schemas/enforcement evidence hashes)
	•	unknown transitions
	•	DCI delta

No “risk,” no “more secure,” no vulnerability claims.

⸻

Minimal acceptance test script (they must run and paste outputs)

Have them run these in Replit shell and paste outputs (trim long JSON OK):

# 1) Clean run (no LLM)
pta analyze <sample_target> --no-llm --mode engineer --out outA

# show artifacts exist
ls -la outA
# must include evidence_pack.v1.json plus original outputs
cat outA/evidence_pack.v1.json | head -n 60

# 2) Second run after a tiny change (or analyze a second target)
pta analyze <sample_target_changed> --no-llm --mode engineer --out outB
ls -la outB

# 3) Render modes from pack only
pta render outA/evidence_pack.v1.json --mode auditor > /tmp/auditor.md
pta render outA/evidence_pack.v1.json --mode executive > /tmp/executive.md
head -n 40 /tmp/auditor.md
head -n 40 /tmp/executive.md

# 4) Diff
pta diff outA/evidence_pack.v1.json outB/evidence_pack.v1.json --out /tmp/diff.md
head -n 80 /tmp/diff.md


⸻

One architectural correction you should insist on

If their system currently yields “0 VERIFIED in –no-llm mode,” you likely have a bug in the VERIFIED semantics.

At minimum, these must be VERIFIED without LLM:
	•	routes (if deterministically extracted)
	•	dependencies (lockfile-based)
	•	file references/snippet hashes (if produced)

LLM should only enhance INFERRED narrative, not the existence of VERIFIED evidence.

⸻

Your next message to the Replit agent (copy/paste)

Your self-report is not sufficient. Provide evidence.
	1.	Paste git diff --stat and diffs for the new modules + CLI changes.
	2.	Prove extraction logic is untouched (post-processing only).
	3.	Paste top-level keys of evidence_pack.v1.json and confirm VERIFIED is deterministic and populated even with --no-llm.
	4.	Run the acceptance script (analyze A/B, render auditor/executive from pack, diff) and paste outputs.
	5.	Confirm diff makes no security/risk claims—only structural deltas and visibility deltas.

If they can satisfy that, then Wave 1 is actually complete. If not, the fix is almost always: decouple VERIFIED from LLM, lock the EvidencePack schema, and move any “verification” heuristics out of extractor paths.