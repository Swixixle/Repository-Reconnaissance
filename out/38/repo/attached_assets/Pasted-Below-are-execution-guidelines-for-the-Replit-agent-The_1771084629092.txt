Below are execution guidelines for the Replit agent.
These are authoritative constraints and sequencing instructions for implementing PTA Wave 1 (Transparency + Translation + Diff foundation) without mutating core extraction logic.

Follow them strictly.

⸻

PTA Wave 1 Implementation Directives

Project: Asset-Analyzer / PTA
Objective: Implement Epistemic Transparency + EvidencePack Adapter without altering core deterministic extraction.

⸻

0. Non-Negotiable Architectural Constraints

Before writing any code, internalize these:
	1.	No execution of target systems.
	2.	No vulnerability scanning logic.
	3.	Do not modify existing extractors.
	4.	Do not reinterpret VERIFIED data.
	5.	UNKNOWN must be explicit — never silent.
	6.	LLM logic (if any) must never upgrade UNKNOWN → VERIFIED.
	7.	All new logic must operate as:
	•	Post-processing layer
	•	Rendering layer
	•	Comparison layer

If a change touches the structural extraction engine, stop and reassess.

⸻

1. Phase Order (Do Not Reorder)

Implement in this exact sequence:

Phase 1 — Known Unknowns (Transparency Layer)

Phase 2 — EvidencePack Adapter

Phase 3 — Mode Rendering

Phase 4 — Diff Mode

Do not begin Diff before EvidencePack is stable.

⸻

2. Phase 1 — Known Unknowns (Transparency Layer)

Goal

Explicitly declare epistemic blind spots in every report.

Required File

Create:

pta/unknowns.py

Requirements
	1.	Define KNOWN_UNKNOWN_CATEGORIES_V1 as a stable contract.
	2.	Categories must default to UNKNOWN.
	3.	Categories can only become VERIFIED if deterministic evidence exists.
	4.	Do NOT infer verification from absence.

Minimum categories:
	•	tls_termination
	•	encryption_at_rest
	•	secret_management
	•	deployment_topology
	•	runtime_iam
	•	logging_sink
	•	monitoring_alerting
	•	backup_retention
	•	data_residency

Integration

Add a post-analysis hook:
	•	After target_howto.json and claims.json are generated
	•	Generate known_unknowns
	•	Inject into:
	•	final dossier JSON
	•	EvidencePack (Phase 2)
	•	DOSSIER.md

Do NOT alter extraction logic to “force detect” these categories.

⸻

3. Phase 2 — EvidencePack Adapter

Objective

Unify existing outputs into a stable contract for governance features.

Create:

pta/adapter.py

Adapter Requirements

Must assemble:
	•	verified.routes (from target_howto.json)
	•	verified.dependencies
	•	verified.schemas (if available)
	•	verified.enforcement (from claims.json)
	•	unknowns (from Phase 1)
	•	metrics.dci (from coverage.json if exists; else placeholder)
	•	hashes.snippets (existing snippet hashes)

The adapter must:
	•	Not modify original JSON files
	•	Emit new file:

evidence_pack.v1.json

Schema version must be embedded:

"evidence_pack_version": "1.0"

All future features operate on EvidencePack only.

⸻

4. Phase 3 — Mode Rendering

Add CLI flag

Add:

--mode engineer
--mode auditor
--mode executive

Default: engineer

Rules

Engineer Mode
	•	Full file:line references
	•	Raw evidence
	•	Verbose output

Auditor Mode
	•	Only VERIFIED + UNKNOWN
	•	No inferred narrative unless explicitly enabled
	•	Emphasize evidence anchors
	•	Emphasize Known Unknown Surface

Executive Mode
	•	Metrics first (DCI)
	•	Surface area summaries
	•	No file:line clutter
	•	Narrative allowed but clearly labeled INFERRED

Rendering must consume EvidencePack only.
Never re-read extraction artifacts directly.

⸻

5. Phase 4 — Diff Mode

Create:

pta_diff.py

CLI:

pta diff packA.json packB.json

Deterministic Comparison Rules

Allowed drift signals:
	•	Route add/remove (method + path)
	•	Dependency add/remove/version change
	•	Snippet hash changes
	•	Enforcement evidence hash delta
	•	Unknown category delta
	•	DCI delta

Not allowed:
	•	Interpreting risk
	•	Calling something “more secure”
	•	Generating vulnerability claims

Diff output:
	•	DIFF_REPORT.md
	•	diff.json (machine-readable)

Optional narrative must be labeled INFERRED.

⸻

6. DCI (Visibility Metric)

Do NOT implement as “security score.”

It is:

Deterministic Coverage Index

Initial version:
	•	Based only on detectable structural elements.
	•	Straight average per class.
	•	Transparent formula in output.

Never imply lower DCI = insecure.

Only imply lower DCI = lower visibility.

⸻

7. Testing Requirements

Before marking Wave 1 complete:
	1.	Run analyzer on sample repo.
	2.	Confirm:
	•	unknowns appear in output
	•	evidence_pack.v1.json generated
	•	engineer/auditor/executive modes differ appropriately
	3.	Create two packs with slight changes and confirm:
	•	pta diff detects route change
	•	pta diff detects snippet hash change
	•	pta diff detects DCI delta

Add snapshot tests where possible.

⸻

8. Code Quality Constraints
	•	No new external heavy dependencies.
	•	Keep modules isolated.
	•	Do not increase coupling between extractor and reporting layers.
	•	Avoid global state.
	•	Version EvidencePack explicitly.

⸻

9. Do NOT Do These Things
	•	Do not add SAST.
	•	Do not add AST vulnerability rules.
	•	Do not add auto-remediation.
	•	Do not claim compliance certification.
	•	Do not introduce runtime scanning.
	•	Do not alter VERIFIED/INFERRED boundary logic.

This is governance tooling, not security scanning.

⸻

10. Final Deliverables for Wave 1

Upon completion, system must:
	•	Produce EvidencePack v1
	•	Emit Known Unknown Surface
	•	Render 3 output modes
	•	Support deterministic pack diff
	•	Preserve original extraction behavior

⸻

If anything requires changing core extractor logic, stop and ask for clarification before proceeding.

Proceed methodically.